第四季-专题19-I2C驱动程序设计 

专题19-I2C驱动程序设计
第1课-I2C总线介绍
I2C硬件结构
（1）     电气特性
I2C（Inter－Integrated Circuit）总线是由PHILIPS公司开发的两线式串行总线，用于连接微控制器及其外围设备。
 
I2C总线只有两根双向信号线。SDA: Serial Data Line-数据线SCL :Serial Clock-时钟线。
（2）     总线寻址
I2C总线协议规定：从设备采用7位的地址。D7～D1：从设备地址。D0位：数据传送方向位，为“0”时表示主设备向从设备写数据，为“1”时表示主机由从设备读数据。主设备发送地址时，总线上的每个从设备都将这7位地址码与自己的地址进行比较，如果相同，则认为自己正被主设备寻址，根据R/W位将自己确定为发送器或接收器。
 
从设备的地址由固定部分和用户自定义部分组成。
l  固定部分：D7-D4 共4位决定的。这是由从设备的生产厂商生产时就已确定的值。
l  用户自定义部分：D3-D1共3位。这3位通常对应设备的3个引脚(A0~A2)。把3个引脚接到不同的电平上，就可以形成一个3位的数值。
 
总线时序
（1）     空闲
I2C总线总线的SDA和SCL两条信号线同时处于高电平时，规定为总线的空闲状态。
 
（2）     起始信号
在时钟线SCL保持高电平期间，数据线SDA上的电平被拉低（即负跳变），定义为I2C总线总线的启动信号，它标志着一次数据传输的开始
（3）     结束信号
在时钟线SCL保持高电平时，数据线SDA被释放，使得SDA返回高电平（即正跳变），称为I2C总线的停止信号
（4）     数据位传送
I2C总线上的所有数据（地址和数据）都是以8位一个字节为单位传送的。
（5）     ACK信号
发送器每发送一个字节，就在时钟脉冲第9位释放数据线，由接收器反馈一个应答信号。应答信号为低电平时，定为有效应答位ACK,表示接收器已经成功地接收了该字节；应答信号为高电平时，定为非应答位（NACK），表示接收器没有成功接收该字节
第2课-2440裸机I2C驱动设计
EEPROM
EEPROM(Electrically Erasable Programmable Read-Only Memory)，电可擦可编程只读存储器，是一种类似于flash的固态存储器，但是与flash相比又存在一些区别：
l  EEPROM 可以按位擦写，而FLASH只能大片擦除
l  EEPROM 一般容量都不大，一般都在64Kbit以下
I2C初始化
写数据设计
读数据设计
EEPROM驱动综合测试
 
第3课-210裸机I2C驱动设计
第4课-Linux-I2C子系统架构
I2C子系统架构
 
l  I2C核心
I2C 总线和I2C 设备驱动的中间枢纽，它提供了I2C 总线驱动和设备驱动的注册、注销方法等。
l  I2C控制器驱动
对I2C控制器的驱动实现，控制器可在CPU 外部，也可以集成在CPU 内部。
l  I2C设备驱动
对I2C从设备的驱动实现，如AT24C02的驱动
I2C总线驱动
 
 
第5课-I2C用户态驱动设计
通用设备驱动分析
 
用户态驱动设计
 
第6课-Linux-I2C自编设备驱动设计
驱动程序分析
 
驱动程序移植
驱动程序测试