系统架构设计笔记（22）—— 系统性能指标
在计算机刚刚诞生时，所谓的系统仅仅指的是计算机本身，随着网络的出现和发展，诸如路由器 、 交换机设备，TCP/IP 、 SPX/IPX 、 以太网 、 光纤网络等网络技术如雨后春笋般涌现。系统的概念也不再局限于单台计算机，而是成为一个集各种通信设备于一体的集成装置。因此，这里所提到的性能指标，既包括软件，也包括硬件。

在硬件中，既包括计算机，也包括各种通信交换设备，以及其他网络硬件；
在软件中，既包括操作系统和各种通信协议，也包括各种参与到通信中的应用程序，如数据库系统 、 Web服务器等。
因此，这里提到的系统性能指标实际上就是这些软硬件的性能指标的集成。

1 计算机
对计算机评价的主要性能指标如下：

（1）时钟频率（主频）

主频是计算机的主要性能指标之一，在很大程度上决定了计算机的运算速度 。 CPU 的工作节拍是由主时钟来控制的，主时钟不断产生固定频率的时钟脉冲，这个主时钟的频率即是 CPU 的主频。主频越高，意味着 CPU 的工作节拍就越快，运算速度也就越快。但从 2000 年 IBM 发布第一款双核处理器开始，多核心已经成为 CPU 发展的一个重要方向。原来单以时钟频率来计算性能指标的方式已经不合适了，还得看单个 CPU 中的内核数。现在主流的服务器 CPU 大都为八核或十二核，未来更可能发展到 32 核， 96 核甚至更多。

（2）高速缓存

高速缓存可以提高 CPU 的运行效率。目前一般采用两级高速缓存技术，有些使用三层。高速缓冲存储器均由静态 RAM （ Random Access Memory ，随机存取存储器）组成，结构较复杂，在 CPU 管芯面积不能太大的情况下， L1 级高速缓存的容量不可能做得太大。采用回写（ WriteBack ）结构的高速缓存，它对读和写操作均有效。而采用写通（ Write-through ）结构的高速缓存，仅对读操作有效 。L2 及 L3 高速缓存容量也会影响 CPU 的性能，原则是越大越好。

（3）运算速度

运算速度是计算机工作能力和生产效率的主要表征，它取决于给定时间内 CPU 所能处理的数据量和 CPU 的主频。其单位一般用 MIPS （Million Instructions Per Second，百万条指令 / 秒）和 MFLOPS （Million Floating-point Operations per Second，百万次浮点运算 / 秒）。 MIPS 用于描述计算机的定点运算能力； MFLOPS 则用来表示计算机的浮点运算能力。

（4）运算精度

即计算机处理信息时能直接处理的二进制数据的位数，位数越多，精度就越高。参与运算的数据的基本位数通常用基本字长来表示 。PC （ Personal Computer ，个人计算机）机的字长，已由 8088 的准 16 位（运算用 16 位， I/O 用8位）发展到现在的 32 位 、 64 位。大中型计算机一般为 32 位和 64 位。巨型机一般为 64 位。在单片机中，目前主要使用的是8位和 16 位字长。

（5）内存的存储容量

内存用来存储数据和程序，直接与 CPU 进行信息交换。内存的容量越大，可存储的数据和程序就越多，从而减少与磁盘信息交换的次数，使运行效率得到提高。存储容量一般用字节（ Byte ）数来度量 。PC 的内存已由 286 机配置的 1MB ，发展到现在主流的 1G 以上。而在服务器领域中，一般的都在 2~8G ，多的如银行系统中省级结算中心使用的大型机，内存高达上百 GB。 内存容量的加大，对于运行大型软件十分必要，尤其是对于大型数据库应用。内存数据库的出现更是将内存的使用发挥到了极致。

（6）存储器的存取周期

内存完成一次读（取）或写（存）操作所需的时间称为存储器的存取时间或者访问时间。而连续两次读（或写）所需的最短时间称为存储周期。存储周期越短，表示从内存存取信息的时间越短，系统的性能也就越好。目前内存的存取周期约为几到几十 ns。

纳秒，时间单位。一秒的十亿分之一，等于10的负9次方秒。

存储器的 I/O 的速度 、 主机 I/O 的速度，取决于 I/O 总线的设计。这对于慢速设备（例如键盘 、 打印机）关系不大，但对于高速设备则效果十分明显。例如对于当前的硬盘，它的外部传输率已可达100MBps 、 133MBps以上。

bps(bits per second)是数据传输速率的常用单位，意思是比特率、比特/秒、位/秒、每秒传的位数。

（7）数据处理速率

数据处理速率（ Processing Data Rate ， PDR ）的计算公式是： PDR =L/R。其中： L=0.85G ＋ 0.15H ＋ 0.4J ＋ 0.15K ； R=0.85M ＋ 0.09N ＋ 0.06P 。

其中：

G 是每条定点指令的位数；
M 是平均定点加法时间；
H 是每条浮点指令的位数；
N 是平均浮点加法时间；
J 是定点操作数的位数；
P 是平均浮点乘法时间；
K 是浮点操作数的位数；
另外还规定： G>20 位， H>30 位；从主存取一条指令的时间等于取一个字的时间；指令和操作数都存放在同一个主存，无变址或间址操作；允许有先行或并行取指令功能，此时选用平均取指令时间。

PDR 主要用来度量 CPU 和主存储器的速度，它没有涉及高速缓存和多功能等。因此， PDR 不能度量机器的整体速度。

（8）响应时间

某一事件从发生到结束的这段时间。其含义将根据应用的不同而变化。响应时间既可以是原子的，也可以是由几个响应时间复合而成的。在计算机技术的发展中，早在 1968 年，米勒先生就已给出3个经典的有关响应时间的建议。

0.1 秒：用户感觉不到任何延迟 。
1.0 秒：用户愿意接受的系统立即响应的时间极限。即当执行一项任务的有效反馈时间在 0.1 ～1秒之内时，用户是愿意接受的。超过此数据值，则意味着用户会感觉到有延迟，但只要不超过 10 秒，用户还是可以接受的。
10 秒：用户保持注意力执行本次任务的极限，如果超过此数值时仍然得不到有效的反馈，客户会在等待计算机完成当前操作时转向其他的任务。
（9）RASIS 特性

RASIS 特性是可靠性（ Reliability ） 、 可用性（ Availability ） 、 可维护性（ Serviceability ） 、 完整性（ Integraity ）和安全性（ Security ）五者的统称。可靠性是指计算机系统在规定的工作条件下和规定的工作时间内持续正确运行的概率。可靠性一般是用平均无故障时间（ Mean Time To Failure ， MTTF ）或平均故障间隔时间（ Mean Time Between Failure ， MTBF ）来衡量。

可维护性是指系统发生故障后能尽快修复的能力，一般用平均故障修复时间（ Mean Time To Repair ， MTTR ）来表示。取决于维护人员的技术水平和对系统的熟悉程度，同时和系统的可维护性也密切相关。

（10）平均故障响应时间

平均故障响应时间（ Trouble Answer Time，TAT）即从出现故障到该故障得到确认修复前的这段时间。该指标反应的是服务水平。平均故障响应时间越短，对用户系统的影响越小。

（11）兼容性

兼容性是指一个系统的硬件或软件与另一个系统或多种操作系统的硬件或软件的兼容能力，是指系统间某些方面具有的并存性，即两个系统之间存在一定程度的通用性。兼容是一个广泛的概念，它包括数据和文件的兼容 、 程序和语言级的兼容 、 系统程序的兼容 、 设备的兼容以及向上兼容和向后兼容等。

除了上述性能指标之外，还有其他性能指标，例如综合性能指标如吞吐率 、 利用率；定性指标如保密性 、 可扩充性；功能特性指标如文字处理能力 、 联机事务处理能力 、 I/O总线特性 、 网络特性等。

2 网络
网络是一个是由多种设备组成的集合体。其性能指标也名目繁多。一般可以将这些性能指标分为以下几类：

（1）设备级性能指标

网络设备提供的通信量的特征，是确定网络性能的一个重要因素。计算机网络设备（主要指路由器）的标准性能指标主要包括吞吐量（信道的最大吞吐量为 “ 信道容量 ” ） 、 延迟 、 丢包率和转发速度等。

（2）网络级性能指标

可达性 、 网络系统的吞吐量 、 传输速率 、 信道利用率 、 信道容量 、 带宽利用率 、 丢包率 、 平均传输延迟 、 平均延迟抖动 、 延迟 / 吞吐量的关系 、 延迟抖动 / 吞吐量的关系 、 丢包率 / 吞吐量的关系等。

（3）应用级性能指标

QOS（Quality of Service，服务质量） 、 网络对语言应用的支持程度 、 网络对视频应用的支持程度 、 延迟 / 服务质量的关系 、 丢包率 / 服务质量的关系 、 延迟抖动 / 服务质量的关系等。

（4）用户级性能指标

计算机网络是一种长周期运行的系统。可靠性和可用性是长周期运行系统非常重要的服务性能，是决定系统是否有实际使用价值的重要参数。

（5）吞吐量

在没有帧丢失的情况下，设备能够接受的最大速率。网络吞吐量可以帮助寻找网络路径中的瓶颈。例如，即使客户端和服务器都被分别连接到各自的 100Mbps 以太网上，但是如果这两个 100Mbps 以太网被 10Mbps 的以太网连接起来，那么 10Mbps 的以太网就是网络的瓶颈。

网络吞吐量非常依赖于当前的网络负载情况。因此，为了得到正确的网络吞吐量，最好在不同时间（一天中的不同时刻，或者一周中不同的天）分别进行测试，只有这样才能得到对网络吞吐量的全面认识。

有些网络应用程序在开发过程的测试中能够正常运行，但是到实际的网络环境中却无法正常工作（由于没有足够的网络吞吐量）。这是因为测试只是在空闲的网络环境中，没有考虑到实际的网络环境中还存在着其他的各种网络流量。所以，网络吞吐量定义为剩余带宽是有实际意义的。

3 操作系统
现代操作系统的基本功能是管理计算机系统的硬件 、 软件资源，这些管理工作分为处理机管理 、 存储器管理 、 设备管理 、 文件管理 、 作业管理和通信事务管理。

操作系统的性能与计算机系统工作的优劣有着密切的联系。评价操作系统的性能指标一般有：

（1）系统的可靠性。
（2）系统的吞吐量，是指系统在单位时间内所处理的信息量，以每小时或每天所处理的各类作业的数量来度量。
（3）系统响应时间，是指用户从提交作业到得到计算结果这段时间，又称周转时间；
（4）系统资源利用率，指系统中各个部件、各种设备的使用程度。它用在给定时间内，某一设备实际使用时间所占的比例来度量。
（5）可移植性。

4 数据库管理系统
数据库为了保证存储在其中的数据的安全和一致，必须有一组软件来完成相应的管理任务，这组软件就是 DBMS ， DBMS 随系统的不同而不同，但是一般来说，它应该包括以下几方面的内容：
（1）数据库描述功能。定义数据库的全局逻辑结构，局部逻辑结构和其他各种数据库对象。
（2）数据库管理功能。包括系统配置与管理，数据存取与更新管理，数据完整性管理和数据安全性管理。（3）数据库的查询和操纵功能。该功能包括数据库检索和修改。
（4）数据库维护功能。包括数据引入引出管理，数据库结构维护，数据恢复功能和性能监测。为了提高数据库系统的开发效率，现代数据库系统除了 DBMS 之外，还提供了各种支持应用开发的工具。

因此，衡量数据库管理系统的主要性能指标包括数据库本身和管理系统两部分。

数据库和数据库管理系统的性能指标包括数据库的大小 、 单个数据库文件的大小 、 数据库中表的数量 、 单个表的大小 、 表中允许的记录（行）数量 、 单个记录（行）的大小 、 表上所允许的索引数量 、 数据库所允许的索引数量 、 最大并发事务处理能力 、 负载均衡能力 、 最大连接数。

5 Web 服务器
Web 服务器也称为 WWW 服务器，主要功能是提供网上信息浏览服务。

在 UNIX 和 Linux 平台下使用最广泛的 HTTP 服务器是 W3C 、 NCSA 和 Apache 服务器，而 Windows 平台使用 IIS 的 Web 服务器。跨平台的 Web 服务器有IBM Web Sphere 、 BEA Web Logic 、 Tomcat等。在选择使用 Web 服务器时，应考虑的本身特性因素有性能 、 安全性 、 日志和统计 、 虚拟主机 、 代理服务器 、 缓冲服务和集成应用程序等。

还有一款轻量级的Web 服务器/反向代理服务器及电子邮件（IMAP/POP3）代理服务器，名叫 Nginx。其特点是占有内存少，并发能力强，事实上nginx的并发能力在同类型的网页服务器中表现较好，中国大陆使用nginx网站用户有：百度、京东、新浪、网易、腾讯、淘宝等。

Web 服务器的主要性能指标包括最大并发连接数 、 响应延迟 、 吞吐量（每秒处理的请求数） 、 成功请求数 、 失败请求数 、 每秒点击次数 、 每秒成功点击次数 、 每秒失败点击次数 、 尝试连接数 、 用户连接数等。